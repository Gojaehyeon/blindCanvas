# pidgin

pidgin은 실시간으로 그려지고 있는 화면이나 그림을 순간적으로 캡처하여,  
사용자가 입력한 텍스트와 함께 ChatGPT Vision API로 전송하고  
AI가 분석한 결과를 실시간으로 보여주는 macOS 애플리케이션입니다.

---

## 개요

pidgin은 창작 과정 중 떠오르는 장면이나 드로잉을 즉시 포착하고,  
AI를 통해 그 이미지의 구조적 분석 혹은 시적 해석을 받을 수 있도록 설계된 도구입니다.  
그림 작업 중에도 흐름을 끊지 않고 즉각적인 피드백을 얻을 수 있습니다.

---

## 주요 기능

- AVFoundation을 이용한 실시간 카메라 또는 화면 프리뷰  
- 키보드 입력(Enter / Space)을 통한 즉시 프레임 캡처  
- 텍스트 + 이미지 조합 프롬프트를 GPT Vision API로 전송  
- 구조적 분석 / 시적 해석 두 가지 모드 제공  
- 결과를 화면에 표시하고, 음성(TTS)으로 읽어주는 기능  
- ESC 키로 입력 모드와 캡처 모드 전환  

---

## 동작 방식

1. 앱이 카메라 또는 화면 프리뷰를 실시간으로 표시합니다.  
2. 사용자가 **Enter** 또는 **Space**를 누르면 현재 프레임이 캡처됩니다.  
3. 캡처된 이미지는 Base64로 인코딩되어 OpenAI API로 전송됩니다.  
4. GPT-4o 모델이 이미지를 분석하고 결과를 반환합니다.  
5. 결과는 앱 내에 표시되며, 자동으로 음성으로 낭독할 수도 있습니다.  

---

## 분석 모드

| 키 | 모드 | 설명 |
|-----|------|------|
| Enter | 구조 해석 | 구도, 형태, 배치 등 시각적 구성요소를 객관적으로 분석 |
| Space | 시적 해석 | 감정, 분위기, 비유를 중심으로 한 주관적 해석 |
| ESC | 모드 전환 | 캡처 화면 ↔ 입력 및 결과 보기 화면 전환 |

---

## GPT 요청 형식

```json
{
  "model": "gpt-4o-mini",
  "messages": [
    {
      "role": "system",
      "content": [
        { "type": "text", "text": "분석 스타일(구조적 / 시적)을 정의하는 시스템 프롬프트" }
      ]
    },
    {
      "role": "user",
      "content": [
        { "type": "text", "text": "사용자가 입력한 텍스트" },
        { "type": "image_url", "image_url": { "url": "data:image/jpeg;base64,..." } }
      ]
    }
  ]
}

기술 스택
    •    언어: Swift, SwiftUI
    •    프레임워크: AVFoundation, AppKit, AVSpeechSynthesizer
    •    AI: OpenAI GPT-4o Vision API
    •    지원 환경: macOS 13.0 이상

⸻

환경 설정

앱 실행 전, OpenAI API 키를 환경 변수로 등록해야 합니다.

또는 macOS Keychain을 통해 보안 저장 방식으로 관리할 수 있습니다.

⸻

사용 방법
    1.    앱을 실행하고 카메라 또는 화면 캡처 권한을 허용합니다.
    2.    프레임 조정 모드에서 캡처 영역을 설정합니다.
    3.    Enter 또는 Space를 눌러 프레임을 캡처하고 API 요청을 전송합니다.
    4.    결과가 표시되면 화면에서 확인하거나, 음성 재생으로 들을 수 있습니다.
    5.    ESC 키로 입력 모드와 캡처 모드를 전환합니다.

⸻

향후 계획
    •    화면 일부 드래그 선택 캡처 기능
    •    iPad Sidecar 연동을 통한 드로잉 실시간 분석
    •    감정 분석 및 제목 자동 생성 기능
    •    분석 결과를 Markdown 로그로 자동 저장

⸻

라이선스

MIT License © 2025 go
